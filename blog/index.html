<!DOCTYPE html>
<html>
    <head>
        <title>High/Low - Blog</title>
        <meta charset='utf-8'>
        <meta name="apple-itunes-app" content="app-id=1495271870">

        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link rel="stylesheet" href="../index.css">


	<meta name="title" content="High/Low - Blog"/>
        <meta name="description" content="Stay up to date on our progress by subscribing to our blog!"/>
        <meta name="robots" content="index,follow"/>

    </head>
    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/5d31e08e9b94cd38bbe849b3/default';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
    })();
    </script>
    <!--End of Tawk.to Script-->
    <body>
        <div id="nav">
            <div>
                <a href="../index.html">Home</a>
                <a href="../blog/index.html">Blog</a>
                <a href="/contact/index.html">Contact</a>
            </div>
        </div>

        <div id="main">
            <div id="container">
                <h1>Latest Blog Posts</h1>

                <div id="posts">
                    Loading posts...
                </div>
            </div>
        </div>


        <script src="https://code.jquery.com/jquery.min.js"></script>
        <script>

            function post(id, title, date, content) {
                const postContent = `
                    <a href="./view/index.html?postId=${id}">
                    <h2>${title}</h2>
                    <span>${date}</span>
                    </a>
                `;

                let el = document.createElement("div");
                el.className = "post";
                el.innerHTML = postContent;

                return el;
            }


            function loadPosts(){

                var postsElement = document.getElementById("posts");

                $.ajax({
                    url: "https://us-central1-highlow-promotional.cloudfunctions.net/getPosts",
                    method: "get",
                    success:function(result){
                        postsElement.innerHTML = "";
                        const posts = JSON.parse(result);

                        for (var i = posts.length-1; i >= 0; i--){
                            postsElement.appendChild(post(posts[i].id, posts[i].title, posts[i].date, posts[i].content));
                        }
                    }
                });

            }

            loadPosts();



        </script>
    </body>
</html>
